using System;
using System.Collections.Generic;

namespace RegistroPersonas
{
    class Program 
    {
        // 1. PRIMERA FUNCIÓN: Obtener la cantidad de personas (Retorna un 'int')
        static int ObtenerCantidadPersonas()
        {
            int cantidad = 0;
            bool cantidadCorrecta = false;

            while (!cantidadCorrecta)
            {
                Console.Write("Dime cuantas personas vas a ingresar: ");
                string entradaTexto = Console.ReadLine();
                bool Convertir = int.TryParse(entradaTexto, out cantidad);

                if (Convertir && cantidad >= 1)
                {
                    cantidadCorrecta = true;
                }
                else
                {
                    Console.WriteLine("Error: Tienes que ingresar 1 o más personas (usa números, no letras).");
                }
            }
            return cantidad; // Tipo de retorno 
        }

        // 2. SEGUNDA FUNCIÓN: Obtener y validar la edad (Retorna un 'int', recibe un parámetro 'string')
        static int ObtenerEdadValida(string nombrePersona) // 'nombrePersona' es el parámetro 
        {
            int edadTemp = 0;
            bool edadCorrecta = false;

            while (!edadCorrecta)
            {
                Console.Write("Escribe la edad de " + nombrePersona + ": ");
                string entradaEdad = Console.ReadLine();
                bool edadConvertida = int.TryParse(entradaEdad, out edadTemp);

                if (edadConvertida && edadTemp > 0)
                {
                    edadCorrecta = true;
                }
                else
                {
                    Console.WriteLine("Error: La edad debe ser un número mayor a cero.");
                }
            }
            return edadTemp; // Tipo de retorno 
        }

        // 3. PROCEDIMIENTO: Muestra los resultados (Uso de 'void', no retorna nada) 
        static void MostrarResultados(List<string> nombres, List<int> edades, int total)
        {
            Console.WriteLine("\n--------------------------------");

            if (total == 1)
            {
                Console.WriteLine("Nombre: " + nombres[0]);
                if (edades[0] >= 18)
                {
                    Console.WriteLine("Es Mayor de edad (Tiene " + edades[0] + " años).");
                }
                else
                {
                    Console.WriteLine("Es Menor de edad (Tiene " + edades[0] + " años).");
                }
            }
            else
            {
                Console.WriteLine("--- LISTA GENERAL ---");
                for (int i = 0; i < nombres.Count; i++)
                {
                    Console.WriteLine(nombres[i] + " tiene " + edades[i] + " años.");
                }

                // Refactorización: En lugar de crear 4 listas nuevas, iteramos sobre las existentes
                Console.WriteLine("\n--- MAYORES DE EDAD ---");
                for (int i = 0; i < nombres.Count; i++)
                {
                    if (edades[i] >= 18)
                    {
                        Console.WriteLine(nombres[i] + " (" + edades[i] + " años)");
                    }
                }

                Console.WriteLine("\n--- MENORES DE EDAD ---");
                for (int i = 0; i < nombres.Count; i++)
                {
                    if (edades[i] < 18)
                    {
                        Console.WriteLine(nombres[i] + " (" + edades[i] + " años)");
                    }
                }
            }
        }

        // PROGRAMA PRINCIPAL
        static void Main(string[] args)
        {
            List<string> listaNombres = new List<string>();
            List<int> listaEdades = new List<int>();

            // Llamada a la primera función
            int cantidad = ObtenerCantidadPersonas();

            for (int i = 0; i < cantidad; i++)
            {
                Console.WriteLine("\nPersona numero " + (i + 1) + ":");
                Console.Write("Escribe el nombre: ");
                string nombreTemp = Console.ReadLine();
                listaNombres.Add(nombreTemp);

                // Llamada a la segunda función pasando un argumento 
                int edadTemp = ObtenerEdadValida(nombreTemp); 
                listaEdades.Add(edadTemp);
            }

            // Llamada al procedimiento pasando argumentos
            MostrarResultados(listaNombres, listaEdades, cantidad);

            Console.WriteLine("\nPresiona Enter para salir...");
            Console.ReadLine();
        }
    }
}
